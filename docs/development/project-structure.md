# é¡¹ç›®ç›®å½•ç»“æ„è¯´æ˜

## é¡¹ç›®æ¦‚è¿°

Pot æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„åˆ’è¯ç¿»è¯‘è½¯ä»¶ï¼ŒåŸºäº Tauri æ¡†æ¶å¼€å‘ï¼Œä½¿ç”¨ React + Rust æŠ€æœ¯æ ˆã€‚æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†é¡¹ç›®çš„ç›®å½•ç»“æ„å’Œå„ä¸ªç»„ä»¶çš„ä½œç”¨ã€‚

## æŠ€æœ¯æ ˆ

-   **å‰ç«¯**: React 18 + Vite + TailwindCSS + NextUI
-   **åç«¯**: Rust + Tauri
-   **æ„å»ºå·¥å…·**: Vite + Tauri CLI
-   **åŒ…ç®¡ç†**: pnpm

## æ ¹ç›®å½•ç»“æ„

```
pot-desktop/
â”œâ”€â”€ asset/                          # é¡¹ç›®èµ„æºæ–‡ä»¶
â”œâ”€â”€ docs/                          # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ public/                        # é™æ€èµ„æºæ–‡ä»¶
â”œâ”€â”€ src/                          # å‰ç«¯æºç 
â”œâ”€â”€ src-tauri/                    # Rust åç«¯æºç 
â”œâ”€â”€ patches/                      # è¡¥ä¸æ–‡ä»¶
â”œâ”€â”€ updater/                      # æ›´æ–°ç¨‹åº
â”œâ”€â”€ node_modules/                 # Node.js ä¾èµ–
â”œâ”€â”€ package.json                  # Node.js é¡¹ç›®é…ç½®
â”œâ”€â”€ pnpm-lock.yaml               # pnpm é”å®šæ–‡ä»¶
â”œâ”€â”€ vite.config.js               # Vite æ„å»ºé…ç½®
â”œâ”€â”€ tailwind.config.cjs          # TailwindCSS é…ç½®
â”œâ”€â”€ postcss.config.js            # PostCSS é…ç½®
â”œâ”€â”€ daemon.html                  # å®ˆæŠ¤è¿›ç¨‹é¡µé¢
â””â”€â”€ index.html                   # ä¸»é¡µé¢æ¨¡æ¿
```

## è¯¦ç»†ç›®å½•è¯´æ˜

### ğŸ“ asset/

é¡¹ç›®å±•ç¤ºå’Œæ–‡æ¡£ç”¨çš„èµ„æºæ–‡ä»¶

```
asset/
â”œâ”€â”€ *.png                        # é¡¹ç›®æˆªå›¾
â””â”€â”€ *.gif                        # åŠŸèƒ½æ¼”ç¤ºåŠ¨å›¾
```

### ğŸ“ docs/

é¡¹ç›®æ–‡æ¡£é›†åˆ

```
docs/
â”œâ”€â”€ README.md                    # ä¸­æ–‡è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ README_EN.md                 # è‹±æ–‡è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ README_KR.md                 # éŸ©æ–‡è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ CHANGELOG                    # æ›´æ–°æ—¥å¿—
â”œâ”€â”€ LICENSE                      # å¼€æºè®¸å¯è¯
â”œâ”€â”€ com.pot_app.pot.metainfo.xml # Linux åº”ç”¨å…ƒä¿¡æ¯
â””â”€â”€ PROJECT_STRUCTURE.md         # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡æ¡£ï¼‰
```

### ğŸ“ public/

é™æ€èµ„æºæ–‡ä»¶ï¼Œä¼šè¢«ç›´æ¥å¤åˆ¶åˆ°æ„å»ºè¾“å‡ºç›®å½•

```
public/
â”œâ”€â”€ icon.png                     # åº”ç”¨å›¾æ ‡ (PNG)
â”œâ”€â”€ icon.svg                     # åº”ç”¨å›¾æ ‡ (SVG)
â”œâ”€â”€ logo/                        # å„ç§æœåŠ¡å•†å’Œå¹³å°çš„å›¾æ ‡
â”‚   â”œâ”€â”€ *.svg                    # çŸ¢é‡å›¾æ ‡
â”‚   â”œâ”€â”€ *.png                    # ä½å›¾å›¾æ ‡
â”‚   â””â”€â”€ *.webp                   # WebP æ ¼å¼å›¾æ ‡
â”œâ”€â”€ tesseract-core-simd-lstm.wasm.js  # Tesseract OCR æ ¸å¿ƒæ–‡ä»¶
â””â”€â”€ worker.min.js                # Web Worker æ–‡ä»¶
```

### ğŸ“ src/

å‰ç«¯ React åº”ç”¨æºç 

```
src/
â”œâ”€â”€ App.jsx                      # æ ¹ç»„ä»¶
â”œâ”€â”€ main.jsx                     # åº”ç”¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ style.css                    # å…¨å±€æ ·å¼
â”œâ”€â”€ components/                  # é€šç”¨ç»„ä»¶
â”‚   â””â”€â”€ WindowControl/           # çª—å£æ§åˆ¶ç»„ä»¶
â”œâ”€â”€ hooks/                       # React Hooks
â”‚   â”œâ”€â”€ index.jsx                # Hooks å¯¼å‡ºæ–‡ä»¶
â”‚   â”œâ”€â”€ useConfig.jsx            # é…ç½®ç®¡ç† Hook
â”‚   â”œâ”€â”€ useGetState.jsx          # çŠ¶æ€è·å– Hook
â”‚   â”œâ”€â”€ useSyncAtom.jsx          # åŸå­çŠ¶æ€åŒæ­¥ Hook
â”‚   â”œâ”€â”€ useToastStyle.jsx        # Toast æ ·å¼ Hook
â”‚   â””â”€â”€ useVoice.jsx             # è¯­éŸ³åŠŸèƒ½ Hook
â”œâ”€â”€ i18n/                        # å›½é™…åŒ–
â”‚   â”œâ”€â”€ index.jsx                # i18n é…ç½®
â”‚   â””â”€â”€ locales/                 # å„è¯­è¨€ç¿»è¯‘æ–‡ä»¶
â”œâ”€â”€ services/                    # æœåŠ¡æ¨¡å—
â”‚   â”œâ”€â”€ collection/              # æ”¶è—åŠŸèƒ½æœåŠ¡
â”‚   â”œâ”€â”€ recognize/               # æ–‡å­—è¯†åˆ«æœåŠ¡
â”‚   â”œâ”€â”€ translate/               # ç¿»è¯‘æœåŠ¡
â”‚   â””â”€â”€ tts/                     # æ–‡å­—è½¬è¯­éŸ³æœåŠ¡
â”œâ”€â”€ utils/                       # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ env.js                   # ç¯å¢ƒå˜é‡å·¥å…·
â”‚   â”œâ”€â”€ index.js                 # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ invoke_plugin.js         # æ’ä»¶è°ƒç”¨å·¥å…·
â”‚   â”œâ”€â”€ lang_detect.js           # è¯­è¨€æ£€æµ‹å·¥å…·
â”‚   â”œâ”€â”€ language.ts              # è¯­è¨€å®šä¹‰
â”‚   â”œâ”€â”€ service_instance.ts      # æœåŠ¡å®ä¾‹ç®¡ç†
â”‚   â””â”€â”€ store.js                 # çŠ¶æ€å­˜å‚¨å·¥å…·
â””â”€â”€ window/                      # å„ä¸ªçª—å£ç»„ä»¶
    â”œâ”€â”€ Config/                  # é…ç½®çª—å£
    â”œâ”€â”€ Recognize/               # è¯†åˆ«çª—å£
    â”œâ”€â”€ Screenshot/              # æˆªå›¾çª—å£
    â”œâ”€â”€ Translate/               # ç¿»è¯‘çª—å£
    â””â”€â”€ Updater/                 # æ›´æ–°çª—å£
```

### ğŸ“ src-tauri/

Tauri Rust åç«¯æºç 

```
src-tauri/
â”œâ”€â”€ Cargo.toml                   # Rust é¡¹ç›®é…ç½®
â”œâ”€â”€ Cargo.lock                   # Rust ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ build.rs                     # æ„å»ºè„šæœ¬
â”œâ”€â”€ tauri.conf.json              # Tauri ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ tauri.*.conf.json            # å„å¹³å°ç‰¹å®šé…ç½®
â”œâ”€â”€ webview.*.json               # WebView é…ç½®æ–‡ä»¶
â”œâ”€â”€ src/                         # Rust æºç 
â”‚   â”œâ”€â”€ main.rs                  # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ backup.rs                # å¤‡ä»½åŠŸèƒ½
â”‚   â”œâ”€â”€ clipboard.rs             # å‰ªè´´æ¿æ“ä½œ
â”‚   â”œâ”€â”€ cmd.rs                   # å‘½ä»¤å¤„ç†
â”‚   â”œâ”€â”€ config.rs                # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ error.rs                 # é”™è¯¯å¤„ç†
â”‚   â”œâ”€â”€ hotkey.rs                # å…¨å±€å¿«æ·é”®
â”‚   â”œâ”€â”€ lang_detect.rs           # è¯­è¨€æ£€æµ‹
â”‚   â”œâ”€â”€ screenshot.rs            # æˆªå›¾åŠŸèƒ½
â”‚   â”œâ”€â”€ server.rs                # HTTP æœåŠ¡å™¨
â”‚   â”œâ”€â”€ system_ocr.rs            # ç³»ç»Ÿ OCR
â”‚   â”œâ”€â”€ tray.rs                  # ç³»ç»Ÿæ‰˜ç›˜
â”‚   â”œâ”€â”€ updater.rs               # è‡ªåŠ¨æ›´æ–°
â”‚   â””â”€â”€ window.rs                # çª—å£ç®¡ç†
â”œâ”€â”€ icons/                       # åº”ç”¨å›¾æ ‡æ–‡ä»¶
â”œâ”€â”€ icons_mac/                   # macOS ä¸“ç”¨å›¾æ ‡
â”œâ”€â”€ resources/                   # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ ocr-aarch64-apple-darwin # ARM64 macOS OCR å¼•æ“
â”‚   â””â”€â”€ ocr-x86_64-apple-darwin  # x64 macOS OCR å¼•æ“
â””â”€â”€ target/                      # Rust æ„å»ºè¾“å‡ºç›®å½•
```

### ğŸ“ services/ è¯¦ç»†è¯´æ˜

#### collection/ - æ”¶è—åŠŸèƒ½

-   `anki/` - Anki å•è¯å¡ç‰‡é›†æˆ
-   `eudic/` - æ¬§è·¯è¯å…¸é›†æˆ

#### recognize/ - æ–‡å­—è¯†åˆ«

-   `baidu/` - ç™¾åº¦é€šç”¨æ–‡å­—è¯†åˆ«
-   `baidu_accurate/` - ç™¾åº¦é«˜ç²¾åº¦æ–‡å­—è¯†åˆ«
-   `baidu_img/` - ç™¾åº¦å›¾ç‰‡æ–‡å­—è¯†åˆ«
-   `iflytek/` - è®¯é£æ–‡å­—è¯†åˆ«
-   `iflytek_intsig/` - è®¯é£æ‰‹å†™è¯†åˆ«
-   `iflytek_latex/` - è®¯é£å…¬å¼è¯†åˆ«
-   `qrcode/` - äºŒç»´ç è¯†åˆ«
-   `simple_latex/` - ç®€å•å…¬å¼è¯†åˆ«
-   `system/` - ç³»ç»Ÿ OCR
-   `tencent/` - è…¾è®¯æ–‡å­—è¯†åˆ«
-   `tencent_accurate/` - è…¾è®¯é«˜ç²¾åº¦è¯†åˆ«
-   `tencent_img/` - è…¾è®¯å›¾ç‰‡è¯†åˆ«
-   `tesseract/` - Tesseract å¼€æº OCR
-   `volcengine/` - ç«å±±å¼•æ“è¯†åˆ«
-   `volcengine_multi_lang/` - ç«å±±å¼•æ“å¤šè¯­è¨€è¯†åˆ«

#### translate/ - ç¿»è¯‘æœåŠ¡

æ”¯æŒå¤šç§ç¿»è¯‘å¼•æ“ï¼ŒåŒ…æ‹¬ï¼š

-   Google ç¿»è¯‘
-   ç™¾åº¦ç¿»è¯‘
-   è…¾è®¯ç¿»è¯‘
-   é˜¿é‡Œç¿»è¯‘
-   æœ‰é“ç¿»è¯‘
-   DeepL ç¿»è¯‘
-   OpenAI ç¿»è¯‘
-   ç­‰ç­‰...

#### tts/ - æ–‡å­—è½¬è¯­éŸ³

-   `lingva/` - Lingva TTS æœåŠ¡

### ğŸ“ window/ è¯¦ç»†è¯´æ˜

#### Config/ - é…ç½®çª—å£

```
Config/
â”œâ”€â”€ index.jsx                    # é…ç½®çª—å£ä¸»ç»„ä»¶
â”œâ”€â”€ style.css                    # é…ç½®çª—å£æ ·å¼
â”œâ”€â”€ components/                  # é…ç½®ç»„ä»¶
â”œâ”€â”€ pages/                       # å„ä¸ªé…ç½®é¡µé¢
â””â”€â”€ routes/                      # è·¯ç”±é…ç½®
```

#### Recognize/ - è¯†åˆ«çª—å£

```
Recognize/
â”œâ”€â”€ index.jsx                    # è¯†åˆ«çª—å£ä¸»ç»„ä»¶
â”œâ”€â”€ ControlArea/                 # æ§åˆ¶åŒºåŸŸç»„ä»¶
â”œâ”€â”€ ImageArea/                   # å›¾ç‰‡æ˜¾ç¤ºåŒºåŸŸ
â””â”€â”€ TextArea/                    # æ–‡æœ¬æ˜¾ç¤ºåŒºåŸŸ
```

### ğŸ“ å…¶ä»–é‡è¦æ–‡ä»¶

-   **package.json**: Node.js é¡¹ç›®é…ç½®ï¼Œå®šä¹‰äº†ä¾èµ–ã€è„šæœ¬å’Œé¡¹ç›®å…ƒä¿¡æ¯
-   **vite.config.js**: Vite æ„å»ºå·¥å…·é…ç½®
-   **tailwind.config.cjs**: TailwindCSS æ ·å¼æ¡†æ¶é…ç½®
-   **pnpm-lock.yaml**: pnpm åŒ…ç®¡ç†å™¨çš„é”å®šæ–‡ä»¶
-   **daemon.html**: åå°å®ˆæŠ¤è¿›ç¨‹çš„ HTML é¡µé¢
-   **patches/hyprland.patch**: Hyprland çª—å£ç®¡ç†å™¨çš„è¡¥ä¸æ–‡ä»¶

## æ„å»ºå’Œå¼€å‘

### å¼€å‘ç¯å¢ƒå¯åŠ¨

```bash
pnpm dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm tauri dev    # å¯åŠ¨ Tauri å¼€å‘ç¯å¢ƒ
```

### æ„å»ºé¡¹ç›®

```bash
pnpm build        # æ„å»ºå‰ç«¯
pnpm tauri build  # æ„å»ºå®Œæ•´åº”ç”¨
```

### æ›´æ–°ç¨‹åº

```bash
pnpm updater      # è¿è¡Œæ›´æ–°ç¨‹åº
```

## æ’ä»¶ç³»ç»Ÿ

é¡¹ç›®æ”¯æŒæ’ä»¶ç³»ç»Ÿï¼Œé€šè¿‡ `src/utils/invoke_plugin.js` å®ç°æ’ä»¶è°ƒç”¨æœºåˆ¶ï¼Œå…è®¸æ‰©å±•å„ç§ç¿»è¯‘ã€è¯†åˆ«å’Œæ”¶è—åŠŸèƒ½ã€‚

## å›½é™…åŒ–æ”¯æŒ

é¡¹ç›®æ”¯æŒå¤šç§è¯­è¨€ï¼Œç¿»è¯‘æ–‡ä»¶ä½äº `src/i18n/locales/` ç›®å½•ä¸‹ï¼ŒåŒ…æ‹¬ï¼š

-   ä¸­æ–‡ï¼ˆç®€ä½“/ç¹ä½“ï¼‰
-   è‹±è¯­
-   æ—¥è¯­
-   éŸ©è¯­
-   æ³•è¯­
-   å¾·è¯­
-   ä¿„è¯­
-   ç­‰å¤šç§è¯­è¨€

## è·¨å¹³å°æ”¯æŒ

-   **Windows**: å®Œæ•´åŠŸèƒ½æ”¯æŒ
-   **macOS**: å®Œæ•´åŠŸèƒ½æ”¯æŒï¼ŒåŒ…å« ARM64 å’Œ x64 æ¶æ„
-   **Linux**: æ”¯æŒä¸»æµå‘è¡Œç‰ˆï¼ŒåŒ…å« Wayland æ”¯æŒ

---

_æœ¬æ–‡æ¡£ä¼šéšç€é¡¹ç›®å‘å±•æŒç»­æ›´æ–°ï¼Œå¦‚æœ‰ç–‘é—®è¯·å‚è€ƒé¡¹ç›® README æˆ–æäº¤ Issueã€‚_
