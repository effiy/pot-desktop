# 插件使用指南

本指南将帮助您了解如何在 Pot 中安装、配置和使用插件来扩展功能。

## 🔌 插件系统介绍

### 什么是插件

插件是扩展 Pot 功能的小程序，可以添加新的翻译服务、OCR 引擎、语音合成服务等。

### 插件类型

| 插件类型        | 功能描述             | 示例                       |
| --------------- | -------------------- | -------------------------- |
| 🔤 **翻译插件** | 添加新的翻译服务     | ChatGPT 翻译、Claude 翻译  |
| 📷 **OCR 插件** | 添加新的文字识别服务 | PaddleOCR、EasyOCR         |
| 🔊 **TTS 插件** | 添加新的语音合成服务 | 自定义 TTS、本地 TTS       |
| 📚 **存储插件** | 添加新的数据存储方式 | Notion 集成、Obsidian 集成 |

## 📦 插件管理

### 访问插件管理

1. **打开设置**: 点击系统托盘图标 → 设置
2. **进入服务管理**: 点击左侧菜单的"服务"
3. **查看插件**: 在服务标签页中查看已安装的插件

### 插件状态

插件具有以下状态：

| 状态          | 图标 | 描述               | 操作             |
| ------------- | ---- | ------------------ | ---------------- |
| 🟢 **已启用** | ✅   | 插件正常工作       | 可以配置和使用   |
| 🟡 **未配置** | ⚠️   | 插件已安装但未配置 | 需要填写配置信息 |
| 🔴 **离线**   | ❌   | 插件无法连接服务   | 检查网络和配置   |
| ⚪ **已禁用** | 🚫   | 插件已禁用         | 可以启用使用     |

## ⚙️ 插件配置

### 通用配置步骤

1. **找到插件**: 在服务管理页面找到要配置的插件
2. **点击配置**: 点击插件卡片上的"配置"按钮
3. **填写信息**: 根据提示填写必要的配置信息
4. **测试连接**: 点击"测试连接"验证配置
5. **保存设置**: 确认配置无误后保存

### 翻译插件配置

#### Google 翻译配置

**配置项**:

-   **API 密钥**: 从 Google Cloud Console 获取
-   **项目 ID**: Google Cloud 项目 ID
-   **区域**: 服务区域（可选）

**获取 API 密钥**:

1. 访问 [Google Cloud Console](https://console.cloud.google.com/)
2. 创建新项目或选择现有项目
3. 启用 Cloud Translation API
4. 创建服务账号密钥
5. 下载 JSON 密钥文件

#### OpenAI 翻译配置

**配置项**:

-   **API 密钥**: OpenAI API 密钥
-   **模型**: 使用的 GPT 模型（gpt-3.5-turbo, gpt-4）
-   **温度**: 创造性参数（0.0-1.0）
-   **最大令牌**: 最大响应长度

**获取 API 密钥**:

1. 访问 [OpenAI Platform](https://platform.openai.com/)
2. 注册账号并完成验证
3. 进入 API Keys 页面
4. 创建新的 API 密钥
5. 复制密钥到配置中

#### 百度翻译配置

**配置项**:

-   **APP ID**: 百度翻译 APP ID
-   **密钥**: 百度翻译密钥
-   **服务类型**: 通用翻译或高级翻译

**获取密钥**:

1. 访问 [百度翻译开放平台](https://fanyi-api.baidu.com/)
2. 注册并实名认证
3. 创建翻译应用
4. 获取 APP ID 和密钥

### OCR 插件配置

#### 百度 OCR 配置

**配置项**:

-   **API Key**: 百度 AI 开放平台 API Key
-   **Secret Key**: 百度 AI 开放平台 Secret Key
-   **识别类型**: 通用文字识别或高精度识别

#### 腾讯 OCR 配置

**配置项**:

-   **Secret ID**: 腾讯云 Secret ID
-   **Secret Key**: 腾讯云 Secret Key
-   **地域**: 服务地域（ap-beijing, ap-shanghai 等）

### TTS 插件配置

#### Edge TTS 配置

**配置项**:

-   **语音**: 选择语音类型
-   **语速**: 调整语音速度
-   **音调**: 调整语音音调

#### Azure TTS 配置

**配置项**:

-   **订阅密钥**: Azure 认知服务密钥
-   **区域**: 服务区域
-   **语音**: 选择语音类型

## 🚀 插件使用

### 翻译插件使用

#### 基本翻译

1. **选中文本**: 在任意应用中选中要翻译的文本
2. **触发翻译**: 按下划词翻译快捷键
3. **查看结果**: 在弹出的翻译窗口中查看结果

#### 多引擎对比

1. **启用多个服务**: 在服务管理中启用多个翻译插件
2. **设置优先级**: 拖拽调整服务优先级
3. **对比结果**: 翻译时会显示多个引擎的结果

### OCR 插件使用

#### 截图识别

1. **按下快捷键**: 使用截图 OCR 快捷键
2. **选择区域**: 拖拽选择要识别的文字区域
3. **等待识别**: 系统自动识别文字内容
4. **查看结果**: 在识别窗口中查看和编辑结果

#### 文件识别

1. **打开识别窗口**: 通过菜单或快捷键打开
2. **选择图片**: 点击"选择文件"按钮
3. **开始识别**: 点击"识别"按钮
4. **处理结果**: 复制、编辑或翻译识别结果

### TTS 插件使用

#### 语音播放

1. **翻译文本**: 先进行文本翻译
2. **点击语音**: 点击翻译结果旁的语音按钮
3. **选择语音**: 在设置中选择喜欢的语音类型
4. **调整参数**: 调整语速、音调等参数

### 存储插件使用

#### Anki 集成

1. **安装 AnkiConnect**: 在 Anki 中安装 AnkiConnect 插件
2. **配置端口**: 确保 AnkiConnect 在默认端口运行
3. **选择牌组**: 在 Pot 中配置目标牌组
4. **添加卡片**: 翻译后点击"添加到 Anki"

#### 欧路词典集成

1. **获取令牌**: 从欧路词典获取 API 令牌
2. **配置生词本**: 选择目标生词本
3. **添加单词**: 翻译后自动或手动添加到生词本

## 🔧 插件故障排除

### 常见问题

#### ❌ 插件无法启用

**症状**: 点击启用开关没有反应

**解决方案**:

1. 检查插件是否已正确安装
2. 查看插件配置是否完整
3. 重启 Pot 应用
4. 查看错误日志

#### ❌ 配置测试失败

**症状**: 点击"测试连接"显示失败

**解决方案**:

**网络问题**:

-   检查网络连接
-   确认代理设置
-   尝试更换网络环境

**配置问题**:

-   验证 API 密钥是否正确
-   检查服务端点地址
-   确认账户状态和配额

**服务问题**:

-   检查服务是否正常运行
-   查看服务状态页面
-   联系服务提供商

#### ❌ 插件功能异常

**症状**: 插件启用但功能不工作

**解决方案**:

1. **重新配置插件**:

    - 清除当前配置
    - 重新填写配置信息
    - 测试连接确认

2. **检查服务状态**:

    - 登录服务提供商控制台
    - 查看 API 使用情况
    - 确认账户余额和配额

3. **更新插件**:
    - 检查是否有插件更新
    - 更新到最新版本
    - 重新配置和测试

### 调试技巧

#### 启用调试模式

1. **开启调试**: 设置 → 通用设置 → 开发模式
2. **查看日志**: 查看详细的插件运行日志
3. **分析错误**: 根据日志信息定位问题

#### 日志查看

**日志位置**:

-   **Windows**: `%APPDATA%\pot\logs\plugins\`
-   **macOS**: `~/Library/Logs/pot/plugins/`
-   **Linux**: `~/.local/share/pot/logs/plugins/`

**日志内容**:

```
[2024-01-15 10:30:00] INFO [google-translate] Translation request started
[2024-01-15 10:30:00] DEBUG [google-translate] Request params: {"text":"Hello","from":"en","to":"zh"}
[2024-01-15 10:30:01] INFO [google-translate] Translation completed successfully
[2024-01-15 10:30:01] ERROR [baidu-translate] API quota exceeded
```

## 🎯 插件最佳实践

### 选择合适的插件

#### 翻译服务选择

**免费服务**:

-   **Google 翻译**: 通用性好，支持语言多
-   **Bing 翻译**: 质量稳定，免费额度大
-   **百度翻译**: 中文支持好，需要注册

**付费服务**:

-   **DeepL**: 翻译质量高，特别适合欧洲语言
-   **OpenAI**: 支持上下文翻译，创造性强
-   **专业服务**: 针对特定领域的专业翻译

#### OCR 服务选择

**离线服务**:

-   **Tesseract**: 完全免费，支持多语言
-   **系统 OCR**: 使用系统内置 OCR（macOS/Windows）

**在线服务**:

-   **百度 OCR**: 中文识别效果好
-   **腾讯 OCR**: 识别速度快，准确度高
-   **Google OCR**: 多语言支持好

### 性能优化

#### 服务优先级设置

1. **按速度排序**: 将响应快的服务放在前面
2. **按准确度排序**: 将准确度高的服务放在前面
3. **按成本排序**: 将免费或低成本服务放在前面

#### 缓存策略

1. **启用本地缓存**: 避免重复请求相同内容
2. **设置缓存时间**: 根据内容类型设置合适的缓存时间
3. **清理缓存**: 定期清理过期缓存

#### 网络优化

1. **配置超时时间**: 根据网络情况调整超时设置
2. **使用代理**: 在网络受限环境中配置代理
3. **重试策略**: 启用自动重试机制

## 🛡️ 插件安全

### 安全注意事项

1. **API 密钥保护**:

    - 不要在公共场所输入 API 密钥
    - 定期更换 API 密钥
    - 使用具有最小权限的密钥

2. **网络安全**:

    - 只使用 HTTPS 连接
    - 验证服务证书
    - 避免在不安全网络中使用

3. **数据隐私**:
    - 了解插件的数据处理政策
    - 避免翻译敏感信息
    - 定期清理翻译历史

### 插件权限

插件可能需要以下权限：

| 权限类型          | 描述           | 风险等级 |
| ----------------- | -------------- | -------- |
| 🌐 **网络访问**   | 访问互联网服务 | 中等     |
| 📁 **文件读取**   | 读取本地文件   | 低       |
| 📝 **文件写入**   | 写入本地文件   | 中等     |
| 🔊 **音频播放**   | 播放音频文件   | 低       |
| 📋 **剪贴板访问** | 读写剪贴板内容 | 中等     |

## 📋 插件配置指南

### 翻译插件配置

#### ChatGPT 翻译插件

**必需配置**:

-   **OpenAI API Key**: 从 OpenAI 平台获取
-   **模型**: 选择 GPT 模型（推荐 gpt-3.5-turbo）
-   **系统提示**: 自定义翻译指令

**高级配置**:

-   **温度**: 控制翻译的创造性（0.0-1.0）
-   **最大令牌**: 限制响应长度
-   **超时时间**: 请求超时设置

**配置示例**:

```json
{
    "apiKey": "sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
    "model": "gpt-3.5-turbo",
    "temperature": 0.3,
    "maxTokens": 1000,
    "systemPrompt": "You are a professional translator. Translate the given text accurately while preserving the original meaning and tone."
}
```

#### DeepL 插件配置

**必需配置**:

-   **Auth Key**: DeepL API 认证密钥
-   **服务类型**: Free 或 Pro

**高级配置**:

-   **正式性**: 翻译的正式程度
-   **保留格式**: 是否保留原文格式

### OCR 插件配置

#### PaddleOCR 插件

**配置选项**:

-   **模型路径**: 本地模型文件路径
-   **检测模型**: 文本检测模型选择
-   **识别模型**: 文本识别模型选择
-   **GPU 加速**: 是否启用 GPU 加速

**性能调优**:

-   **批处理大小**: 同时处理的图像数量
-   **置信度阈值**: 文本检测的置信度阈值
-   **NMS 阈值**: 非极大值抑制阈值

### 存储插件配置

#### Anki 插件配置

**基础配置**:

-   **AnkiConnect 端口**: 默认 8765
-   **目标牌组**: 存储卡片的牌组名称
-   **笔记类型**: 卡片的笔记类型

**卡片模板**:

-   **正面字段**: 源语言文本字段
-   **背面字段**: 目标语言文本字段
-   **标签**: 自动添加的标签

**配置示例**:

```json
{
    "port": 8765,
    "deckName": "Pot Translations",
    "noteType": "Basic",
    "fields": {
        "front": "Front",
        "back": "Back",
        "context": "Context"
    },
    "tags": ["pot-app", "translation"]
}
```

## 💡 使用技巧

### 提升翻译质量

1. **多引擎对比**: 启用多个翻译插件进行对比
2. **上下文翻译**: 提供上下文信息提高准确度
3. **专业领域**: 选择合适的专业领域设置
4. **后编辑**: 对翻译结果进行人工校对

### 提升 OCR 准确度

1. **图像质量**: 确保截图清晰，对比度高
2. **语言设置**: 正确设置识别语言
3. **区域选择**: 精确选择文字区域
4. **后处理**: 对识别结果进行人工校正

### 优化使用体验

1. **快捷键设置**: 为常用功能设置快捷键
2. **服务排序**: 将常用服务排在前面
3. **自动化**: 启用自动复制、自动播放等功能
4. **历史管理**: 定期清理和整理翻译历史

## 🔍 插件推荐

### 官方推荐插件

#### 翻译类

1. **OpenAI Translator**

    - 支持 GPT-3.5 和 GPT-4
    - 上下文感知翻译
    - 支持自定义提示词

2. **Claude Translator**

    - Anthropic Claude API
    - 长文本翻译支持
    - 高质量翻译结果

3. **Gemini Translator**
    - Google Gemini API
    - 多模态翻译支持
    - 快速响应

#### OCR 类

1. **PaddleOCR Plugin**

    - 完全免费离线使用
    - 支持多种语言
    - 高精度识别

2. **EasyOCR Plugin**
    - 轻量级 OCR 引擎
    - 支持 80+ 语言
    - 易于配置

#### 存储类

1. **Notion Integration**

    - 保存到 Notion 数据库
    - 支持富文本格式
    - 团队协作支持

2. **Obsidian Plugin**
    - 集成到 Obsidian 笔记
    - 支持双向链接
    - Markdown 格式

### 社区插件

访问 [Pot 插件市场](https://plugins.pot-app.com) 查看更多社区开发的插件。

## 📞 获取帮助

### 插件问题反馈

1. **插件问题**: 联系插件开发者
2. **系统问题**: 在 Pot 项目提交 Issue
3. **使用问题**: 查看插件文档或社区讨论

### 社区支持

-   **QQ 频道**: [加入讨论](https://pd.qq.com/s/akns94e1r)
-   **GitHub**: [项目主页](https://github.com/pot-app/pot-desktop)
-   **插件市场**: [官方插件市场](https://plugins.pot-app.com)

### 插件开发

如果您想开发自己的插件：

1. 查看 [插件开发指南](../development/plugins.md)
2. 参考 [插件 API 文档](../api/plugin-api.md)
3. 加入开发者社区讨论

---

_插件使用指南会随着插件生态的发展持续更新，欢迎分享使用经验和技巧。_
